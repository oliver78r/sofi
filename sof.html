<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Para Mi Sofia</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%; width: 100%;
    font-family: 'Arial', sans-serif;
    background: linear-gradient(to bottom, #e3f2fd, #c8e6c9);
    overflow: hidden; /* importante para que las hojas no generen scroll */
  }

  /* Canvas de fuegos artificiales detrás de todo */
  #fireCanvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
    pointer-events: none;
  }

  /* Canvas de hojas ocupa toda la ventana, encima de fuegos */
  #leafCanvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none; /* no bloquea clics */
  }

  /* Contenido central */
  .content {
    position: relative;
    z-index: 2;
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .message {
    text-align: center;
    margin-bottom: 20px;
  }

  .main-text {
    font-size: 28px;
    font-weight: bold;
    color: #ff6b6b;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    margin: 0;
  }

  .signature {
    font-size: 14px;
    color: #666;
    font-style: italic;
    margin-top: 20px;
  }

  #tulipCanvas {
    width: 400px;
    height: 400px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: block;
  }
</style>
</head>
<body>

<!-- Canvas de fuegos artificiales -->
<canvas id="fireCanvas"></canvas>

<!-- Canvas de hojas cayendo -->
<canvas id="leafCanvas"></canvas>

<div class="content">
  <div class="message">
    <h1 class="main-text">Te amo mucho Mi linda Sofia</h1>
  </div>

  <canvas id="tulipCanvas" width="400" height="400"></canvas>

  <div class="signature">
    att: oliver
  </div>
</div>

<script>
/* =================== FUEGOS ARTIFICIALES =================== */
const fireCanvas = document.getElementById('fireCanvas');
const fctx = fireCanvas.getContext('2d');
function resizeFireCanvas(){
  fireCanvas.width = window.innerWidth;
  fireCanvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeFireCanvas);
resizeFireCanvas();

class Particle {
  constructor(x, y, color) {
    this.x = x;
    this.y = y;
    this.color = color;
    this.radius = Math.random() * 2 + 1;
    this.angle = Math.random() * 2 * Math.PI;
    this.speed = Math.random() * 5 + 2;
    this.life = 100;
  }
  update() {
    this.x += Math.cos(this.angle) * this.speed;
    this.y += Math.sin(this.angle) * this.speed;
    this.speed *= 0.96;
    this.life--;
  }
  draw() {
    fctx.beginPath();
    fctx.fillStyle = this.color;
    fctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
    fctx.fill();
  }
}

let particles = [];
function createFirework() {
  const x = Math.random() < 0.5 ? Math.random() * 200 : window.innerWidth - Math.random() * 200;
  const y = Math.random() * (window.innerHeight / 2);
  const colors = ['#ff5252', '#ffca28', '#40c4ff', '#69f0ae', '#ea80fc'];
  const color = colors[Math.floor(Math.random() * colors.length)];
  for (let i = 0; i < 40; i++) {
    particles.push(new Particle(x, y, color));
  }
}

function animateFireworks() {
  fctx.fillStyle = 'rgba(0,0,0,0.2)';
  fctx.fillRect(0, 0, fireCanvas.width, fireCanvas.height);
  particles.forEach((p, i) => {
    p.update();
    p.draw();
    if (p.life <= 0) particles.splice(i, 1);
  });
  requestAnimationFrame(animateFireworks);
}

setInterval(createFirework, 1200);
animateFireworks();

/* =================== HOJAS QUE CAEN =================== */
const leafCanvas = document.getElementById('leafCanvas');
const lctx = leafCanvas.getContext('2d');

function resizeLeafCanvas(){
  leafCanvas.width = window.innerWidth;
  leafCanvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeLeafCanvas);
resizeLeafCanvas();

const leafColors = ['#4CAF50','#81C784','#66BB6A','#A5D6A7','#388E3C'];
const leaves = [];

class Leaf {
  constructor() { this.reset(); }
  reset() {
    this.x = Math.random() * leafCanvas.width;
    this.y = -20;
    this.size = 15 + Math.random() * 20;
    this.speedY = 0.5 + Math.random() * 1.5;
    this.angle = Math.random() * Math.PI * 2;
    this.color = leafColors[Math.floor(Math.random()*leafColors.length)];
  }
  update() {
    this.y += this.speedY;
    this.angle += 0.01;
    this.x += Math.sin(this.angle) * 0.5;
    if (this.y > leafCanvas.height + 30) this.reset();
  }
  draw(ctx) {
    ctx.save();
    ctx.translate(this.x, this.y);
    ctx.rotate(Math.sin(this.angle)*0.5);
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.ellipse(0, 0, this.size * 0.6, this.size, 0, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
  }
}

for (let i=0; i<40; i++) { leaves.push(new Leaf()); }

function animateLeaves() {
  lctx.clearRect(0,0,leafCanvas.width, leafCanvas.height);
  leaves.forEach(leaf=>{
    leaf.update();
    leaf.draw(lctx);
  });
  requestAnimationFrame(animateLeaves);
}
animateLeaves();

/* =================== TULIPÁN =================== */
const canvas = document.getElementById('tulipCanvas');
const ctx = canvas.getContext('2d');
let pulse = 0;

function drawPetal(x, y, width, height, rotation) {
  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(rotation);
  const gradient = ctx.createRadialGradient(0, 0, width * 0.1, 0, 0, width);
  gradient.addColorStop(0, '#FFEB3B');
  gradient.addColorStop(1, '#FBC02D');
  ctx.fillStyle = gradient;
  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.bezierCurveTo(width * 0.5, -height * 0.8, width * 0.8, height * 0.2, 0, height);
  ctx.bezierCurveTo(-width * 0.8, height * 0.2, -width * 0.5, -height * 0.8, 0, 0);
  ctx.fill();
  ctx.restore();
}

function drawStem(x, y, height, width) {
  const gradient = ctx.createLinearGradient(x, y, x, y + height);
  gradient.addColorStop(0, '#388E3C');
  gradient.addColorStop(1, '#2E7D32');
  ctx.fillStyle = gradient;
  ctx.beginPath();
  ctx.moveTo(x - width / 2, y);
  ctx.lineTo(x + width / 2, y);
  ctx.lineTo(x + width / 3, y + height);
  ctx.lineTo(x - width / 3, y + height);
  ctx.closePath();
  ctx.fill();
}

function drawLeaf(x, y, width, height, rotation) {
  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(rotation);
  const gradient = ctx.createLinearGradient(0, 0, width, height);
  gradient.addColorStop(0, '#4CAF50');
  gradient.addColorStop(1, '#2E7D32');
  ctx.fillStyle = gradient;
  ctx.beginPath();
  ctx.ellipse(0, 0, width, height, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.restore();
}

function animateTulip() {
  const w = canvas.width;
  const h = canvas.height;
  ctx.clearRect(0, 0, w, h);
  const bgGradient = ctx.createLinearGradient(0, 0, 0, h);
  bgGradient.addColorStop(0, '#E3F2FD');
  bgGradient.addColorStop(1, '#C8E6C9');
  ctx.fillStyle = bgGradient;
  ctx.fillRect(0, 0, w, h);
  const centerX = w / 2;
  const baseY = h * 0.75;
  pulse += 0.03;
  const scale = 1 + Math.sin(pulse) * 0.05;
  ctx.save();
  ctx.translate(centerX, baseY);
  ctx.scale(scale, scale);
  drawStem(0, 0, h * 0.4, 20);
  drawLeaf(-30, h * 0.15, 30, 60, -Math.PI / 6);
  drawLeaf(30, h * 0.2, 30, 60, Math.PI / 6);
  drawPetal(0, -h * 0.4, 40, 80, 0);
  drawPetal(-25, -h * 0.35, 40, 80, -0.4);
  drawPetal(25, -h * 0.35, 40, 80, 0.4);
  ctx.restore();
  requestAnimationFrame(animateTulip);
}
animateTulip();
</script>
</body>
</html>
